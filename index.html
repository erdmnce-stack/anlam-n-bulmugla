<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>칂evrim 캻칞i Anlam캼n캼 Bul / MU뢻A (20 Soru)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-image: url('Ads캼z tasar캼m (1).png'); /* Resminizin tam ad캼 */
    background-size: cover;
    background-position: center;
    background-attachment: fixed; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 750px; margin-top: 40px; }
        .card { border: none; shadow: 0 8px 20px rgba(0,0,0,0.1); border-radius: 20px; overflow: hidden; }
        .hidden { display: none !important; }
        .timer-box { font-size: 1.4rem; font-weight: bold; color: #fff; background: #dc3545; padding: 5px 15px; border-radius: 10px; }
        .option-btn { width: 100%; text-align: left; margin-bottom: 12px; padding: 15px; border: 2px solid #e9ecef; border-radius: 12px; transition: all 0.2s; background: #fff; color: #333; }
        .option-btn:hover { background-color: #f8f9fa; border-color: #0d6efd; color: #0d6efd; transform: translateY(-2px); }
        .option-btn:active { background-color: #0d6efd; color: white; }
        .header-bg { background: linear-gradient(135deg, #8B0000 0%, #A0522D 100%); color: white; padding: 40px 20px; text-align: center; }
        #admin-panel { margin-top: 50px; border-top: 2px dashed #ccc; padding-top: 20px; margin-bottom: 50px;}
    </style>
</head>
<body>

<div class="container mb-5">
    
    <div id="login-screen" class="card">
        <div class="header-bg">
            <h1>Mu륿a 캻l Milli E를tim M칲d칲rl칲칲</h1>
            <p class="mb-0 opacity-75">Dilimizin Zenginlikleri Projesi - Anlam캼n캼 Bul Yar캼릀as캼</p>
        </div>
        <div class="p-5">
            <form id="user-form">
                <div class="mb-3">
                    <label class="form-label text-muted">Ad캼n캼z Soyad캼n캼z</label>
                    <input type="text" id="username" class="form-control form-control-lg" required>
                </div>
                <div class="mb-3">
                    <label class="form-label text-muted">Okulunuzun Ad캼</label>
                    <input type="text" id="useremail" class="form-control form-control-lg" required>
                </div>
                <div class="mb-3">
                    <label class="form-label text-muted">캻l칞e Ad캼</label>
                    <input type="text" id="userphone" class="form-control form-control-lg" required>
                </div>
                
                <div class="mb-3">
                    <label class="form-label text-muted">T.C. Kimlik Numaras캼 (11 Hane)</label>
                    <input type="text" id="user-tckn" class="form-control form-control-lg" 
                           maxlength="11" pattern="[0-9]{11}" 
                           title="T.C. Kimlik Numaras캼 11 rakamdan olu릀al캼d캼r." required>
                </div>
                <button type="submit" class="btn btn-primary btn-lg w-100 py-3 fw-bold mt-2">Yar캼릀aya Ba륿a</button>
            </form>
        </div>
    </div>

    <div id="quiz-screen" class="card p-4 hidden">
        <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
            <h5 class="m-0 text-primary" id="question-counter">Soru 1 / 20</h5>
            <div class="timer-box" id="timer">00:00</div>
        </div>
        
        <h4 id="question-text" class="mb-4 lh-base fw-bold">Soru metni y칲kleniyor...</h4>
        
        <div id="options-container">
            </div>
    </div>

    <div id="result-screen" class="card p-5 text-center hidden">
        <div class="mb-4">
            <img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" width="80" alt="Trophy">
        </div>
        <h2 class="fw-bold mb-3">Yar캼릀a Tamamland캼!</h2>
        
        <div class="row justify-content-center mb-4">
            <div class="col-6">
                <div class="bg-light p-3 rounded">
                    <div class="text-muted small">TOPLAM PUAN</div>
                    <div class="display-6 fw-bold text-success" id="final-score">0</div>
                </div>
            </div>
            <div class="col-6">
                <div class="bg-light p-3 rounded">
                    <div class="text-muted small">TOPLAM S칖RE</div>
                    <div class="display-6 fw-bold text-dark" id="final-time">0:00</div>
                </div>
            </div>
        </div>

        <h5 class="text-start border-bottom pb-2 mt-4">游끥 Liderlik Tablosu (캻lk 10)</h5>
        <div class="table-responsive">
            <table class="table table-hover text-start align-middle">
                <thead class="table-light">
                    <tr><th>#</th><th>캻sim</th><th>Puan</th><th>S칲re</th></tr>
                </thead>
                <tbody id="leaderboard-body">
                    <tr><td colspan="4" class="text-center">Y칲kleniyor...</td></tr>
                </tbody>
            </table>
        </div>
        <p class="text-muted small mt-3">Sonu칞lar캼n캼z sisteme kaydedilmi릆ir. Pencereyi kapatabilirsiniz.</p>
    </div>

    <div class="text-center mt-4">
        <button class="btn btn-link text-decoration-none text-muted" onclick="toggleAdmin()">Y칬netici Giri를 游</button>
    </div>

    <div id="admin-panel" class="hidden container bg-white p-4 rounded shadow-sm">
        <h3>Y칬netici Paneli</h3>
        <div class="input-group mb-3 w-50">
            <input type="password" id="admin-pass" class="form-control" placeholder="Admin 룔fresi">
            <button onclick="checkAdmin()" class="btn btn-dark">Giri Yap</button>
        </div>
        
        <div id="admin-data" class="hidden">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5>T칲m Kat캼l캼mc캼 Listesi</h5>
                <button onclick="exportTableToCSV('yarisma-sonuclari.csv')" class="btn btn-success btn-sm">Excel 캻ndir (CSV)</button>
            </div>
            <div class="table-responsive" style="max-height: 400px; overflow: auto;">
                <table class="table table-bordered table-striped text-small" id="full-table">
                    <thead><tr><th>Tarih</th><th>캻sim</th><th>Okul</th><th>캻l칞e</th><th>TCKN</th><th>Puan</th><th>S칲re(sn)</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script type="module">
    // --- G칖VENL캻K BA뢻ANGI칂 (Sa T캼k ve K캼sayol Engelleme) ---
  document.addEventListener('contextmenu', event => event.preventDefault());

  document.onkeydown = function(e) {
      if(e.keyCode == 123) { return false; } // F12
      if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { return false; } // Ctrl+Shift+I
      if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) { return false; } // Ctrl+Shift+C
      if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { return false; } // Ctrl+U
  }
  // --- G칖VENL캻K B캻T캻 ---
  // ==========================================
  // 1. FIREBASE AYARLARI (KEND캻 B캻LG캻LER캻N캻 G캻R)
  // ==========================================
  // WHERE FONKS캻YONU 캻칂캻N 캻MPORT G칖NCELLEND캻
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit, where } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

  const firebaseConfig = {
  apiKey: "AIzaSyARDPDRIO6YUO2NogwOfiCzILmupppbzI4",
  authDomain: "anlamini-bul-mugla.firebaseapp.com",
  projectId: "anlamini-bul-mugla",
  storageBucket: "anlamini-bul-mugla.firebasestorage.app",
  messagingSenderId: "71609064976",
  appId: "1:71609064976:web:f6492705fbe91e09c97495"
};

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ==========================================
  // 2. 20 ADET 칐RNEK SORU HAVUZU
  // ==========================================
  // 
  const allQuestions = [
   {q:"'S캼navda ba르r캼s캼z olmas캼n캼n sebeplerini 칬retmeniyle birlikte de른rlendirdi.' c칲mlesinde ge칞en 'sebep' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["neden","sonu칞","bahane","ama칞"]},{q:"'칐rencinin verdi를 cevap, sorunun t칲m y칬nlerini kaps캼yordu.' c칲mlesinde ge칞en 'cevap' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["yan캼t","soru","kan캼t","칞칬z칲m"]},{q:"'Sa륿캼kl캼 bir hayat s칲rmek i칞in d칲zenli uyku 칞ok 칬nemlidir.' c칲mlesinde ge칞en 'hayat' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["ya르m","칬m칲r","d칲nya","kader"]},{q:"'Uzun s칲ren 칞al캼릀alar캼n neticesi beklenenden daha olumlu oldu.' c칲mlesinde ge칞en 'netice' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["sonu칞","sebep","geli릀e","ihtimal"]},{q:"'칐retmen konuyu daha iyi anlamam캼z i칞in bir misal verdi.' c칲mlesinde ge칞en 'misal' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["칬rnek","칬zet","kan캼t","soru"]},{q:"'Ya르d캼캼 른hir, tarihi yap캼lar캼yla dikkat 칞ekmektedir.' c칲mlesinde ge칞en '른hir' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["kent","k칬y","kasaba","b칬lge"]},{q:"'Bu projeyi tamamlamak i칞in yeterli zaman캼m캼z oldu릇nu s칬yledi.' c칲mlesinde ge칞en 'zaman' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["s칲re","devir","an","mevsim"]},{q:"'Ya륿캼 adam캼n 칞ehresindeki 칞izgiler, ya르d캼캼 y캼llar캼 anlat캼yordu.' c칲mlesinde ge칞en '칞ehre' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["y칲z","bak캼","ba","g칬lge"]},{q:"'Ya르d캼캼 olaylardan sonra kendini bedbaht hissetti.' c칲mlesinde ge칞en 'bedbaht' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["mutsuz","endi른li","르륾캼n","k캼zg캼n"]},{q:"'Ka칞 zamand캼r beynimi, kan캼m캼 ate륿endiren bu idealimin lezzetini tatmak i칞in her m칙niyi 칞i릁eyece를m.' c칲mlesinde ge칞en 'm칙ni' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["engel","istek","sebep","칞are"]},{q:"'Arsalar sat캼ld캼ktan sonra in르at ba륿ad캼.' c칲mlesinde ge칞en 'in르at' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["yap캼m","y캼k캼m","onar캼m","ta캼ma"]},{q:"'M칲tevaz캼 ve kalabal캼ktan ka칞an ruhunu incitmemek i칞in 칞ok ura캼yorduk.' c칲mlesinde ge칞en 'm칲tevaz캼' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["al칞ak g칬n칲ll칲","inat칞캼","kuralc캼","aceleci"]},{q:"'Kolay 칬hret, g칲칞 sanat캼n 른refini daima k캼skanm캼릆캼r.' c칲mlesinde ge칞en '른ref' s칬zc칲칲n칲n T칲rk칞e kar캼l캼캼 nedir?",a:["onur","칞캼kar","kibir","칲n"]} , { q: "'Yazar, konu릀as캼na k캼sa bir anekdot anlatarak ba륿ad캼.' c칲mlesindeki anekdot kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["hik칙yecik", "hat캼ra", "hik칙ye", "f캼kra"] }, { q: "'Oyunun son sahnesi o kadar abs칲rtt칲 ki salon kahkahaya bo릇ldu.' c칲mlesindeki abs칲rt kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sa칞ma", "ciddi", "d칲zg칲n", "mant캼kl캼"] }, { q: "'Bu roman diziye adapte edilerek geni kitlelere ula릆캼r캼ld캼.' c칲mlesindeki adapte kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["uyarlanm캼", "d칲zenlenmi", "aktar캼lm캼", "de를릆irilmi"] }, { q: "'Yeme를n sonunda garsondan adisyonu getirmesini istedik.' c칲mlesindeki adisyon kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["hesap", "men칲", "fi", "sipari"] }, { q: "'Kitapta yer alan aforizmalar 칬rencilerin 칞ok ho릇na gitti.' c칲mlesindeki aforizma kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬zdeyi", "atas칬z칲", "n칲kte", "deyi"] }, { q: "'Ma칞 boyunca g칬sterdi를 agresif tav캼rlar herkesi rahats캼z etti.' c칲mlesindeki agresif kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sald캼rgan", "h캼r칞캼n", "sert", "kavgac캼"] }, { q: "'Yeni y캼lda hedeflerimi ajandama tek tek not ettim.' c칲mlesindeki ajanda kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["anda칞", "takvim", "defter", "planlay캼c캼"] }, { q: "'G칬steride yap캼lan akrobasi hareketleri izleyenleri b칲y칲ledi.' c칲mlesindeki akrobasi kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["cambazl캼k", "dengecilik", "jimnastik", "ip cambazl캼캼"] }, { q: "'Konu릀as캼nda yapt캼캼 ajitasyon kalabal캼캼 olumsuz etkiledi.' c칲mlesindeki ajitasyon kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["k캼륾캼rtma", "k캼륾캼rt캼c캼 konu릀a", "duygu s칬m칲r칲s칲", "tahrik"] }, { q: "'Onu tan캼d캼k칞a sebepsiz bir antipati hissetmeye ba륿ad캼m.' c칲mlesindeki antipati kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sevimsizlik, iticilik", "so릇kluk", "nefret", "ho릁utsuzluk"] }, { q: "'룔ir antolojisi, farkl캼 르irlerden se칞me eserler i칞eriyor.' c칲mlesindeki antoloji kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["se칞ki", "roman", "를ir kitab캼", "dergi"] }, { q: "'F캼r캼ndan gelen vanilya aromas캼 b칲t칲n evi sard캼.' c칲mlesindeki aroma kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ho koku", "koku", "tat", "esans"] }, { q: "'K칲칞칲k ya륿ardan beri astronomi ile ilgileniyor.' c칲mlesindeki astronomi kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["g칬k bilimi", "uzay ara릆캼rmalar캼", "astroloji", "g칬kbilimi"] }, { q: "'Anavgart sanat칞캼lar genellikle geleneksel anlay캼캼n d캼캼na 칞캼kar.' c칲mlesindeki anavgart kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬nc칲", "yenilik칞i", "deneysel", "modernist"] }, { q: "'Bu 칞al캼릀ada 칬nceki y캼l캼n verilerini baz almak daha doru olur.' c칲mlesindeki baz almak kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["temel almak", "referans almak", "칬l칞칲t almak", "dayanak yapmak"] }, { q: "'Konserdeki bateri solosu uzun s칲re alk캼륿and캼.' c칲mlesindeki bateri kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["davul", "zil", "gitar", "keman"] }, { q: "'Roman, d칬nemin burjuva ya르m tarz캼n캼 ele릆irel bir dille anlat캼yor.' c칲mlesindeki burjuva kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["kent soylu", "ileri s캼n캼f", "zengin s캼n캼f", "kentli"] }, { q: "'Toplumdaki de른rlerin yava yava dejenere oldu릇nu savunuyor.' c칲mlesindeki dejenere kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["yoz, bozulmu", "bozulmu", "칞칲r칲m칲", "yozla릀캼"] }, { q: "'Alb칲mden 칬nce k캼sa bir demo yay캼mlay캼p dinleyicilerin tepkisini 칬l칞t칲ler.' c칲mlesindeki demo kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["tan캼t캼m 칲r칲n칲", "taslak kay캼t", "tan캼t캼m videosu", "칬n izleme"] }, { q: "'Pe pe른 gelen hatalar oyuncuyu tamamen demoralize etti.' c칲mlesindeki demoralize kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["morali bozulmu", "y캼lg캼n", "motivasyonsuz", "umutsuz"] }, { q: "'Raporu haz캼rlarken k칲칞칲k detaylara bile dikkat etmelisin.' c칲mlesindeki detay kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ayr캼nt캼", "n칲ans", "ince nokta", "k칲칞칲k ayr캼nt캼"] }, { q: "'Toplant캼 i칞in gerekli t칲m dok칲manlar캼 klas칬re yerle릆irdim.' c칲mlesindeki dok칲man kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["belge", "dosya", "evrak", "metin"] }, { q: "'Yabanc캼 filmler dublaj yerine altyaz캼l캼 izlendi를nde dili daha iyi 칬renirsin.' c칲mlesindeki dublaj kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["seslendirme", "altyaz캼", "칞eviri", "ses kayd캼"] }, { q: "'S칲rekli empoze edilen fikirler 칬rencilerin zihnini daralt캼yor.' c칲mlesindeki empoze kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["dayat캼lm캼", "dayatmak", "zorla kabul ettirmek", "bask캼 kurmak"] }, { q: "'End칲stri devrimiyle birlikte 칲retim bi칞imleri tamamen de를릆i.' c칲mlesindeki end칲stri kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sanayi", "imalat", "칲retim", "fabrika sekt칬r칲"] }, { q: "'Enstr칲man 칞almak beynin farkl캼 b칬lgelerini ayn캼 anda 칞al캼릆캼r캼r.' c칲mlesindeki enstr칲man kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칞alg캼", "nota", "orkestra", "melodi"] }, { q: "'Yar캼캼n ilk etab캼 da륿캼k b칬lgede ko릇lacak.' c칲mlesindeki etap kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["a르ma", "b칬l칲m", "k캼s캼m", "tur"] }, { q: "'D칲zenli fitness yapmak hem bedeni hem zihni g칲칞lendirir.' c칲mlesindeki fitness kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sa륿캼kl캼 ya르m", "kondisyon", "form tutma", "beden e를timi"] }, { q: "'Folklor 칞al캼릀alar캼, bir milletin k칲lt칲rel miras캼n캼 ortaya 칞캼kar캼r.' c칲mlesindeki folklor kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["halk bilimi", "halk k칲lt칲r칲", "gelenek bilimi", "etnografya"] }, { q: "'Bu 칲r칲n be y캼l garanti kapsam캼ndad캼r.' c칲mlesindeki garanti kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["g칲vence", "teminat", "g칲vencelik", "s칬z verme"] }, { q: "'Global sorunlara yerel 칞칬z칲mler 칲retmek giderek 칬nem kazan캼yor.' c칲mlesindeki global kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["k칲resel", "yerel", "b칬lgesel", "ulusal"] }, { q: "'Yaz캼m yanl캼륿ar캼n캼n 칞o릇 gramer kurallar캼na dikkat edilmemesinden kaynaklan캼yor.' c칲mlesindeki gramer kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["dil bilgisi", "s칬zdizimi", "dil kurallar캼", "yaz캼m bilgisi"] }, { q: "'Sakatl캼k onun i칞in b칲y칲k bir handikap olu릆urdu.' c칲mlesindeki handikap kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["engel", "avantaj", "kolayl캼k", "f캼rsat"] }, { q: "'Kafede 칬rencilere 칬zel happy hour uygulamas캼 ba륿at캼ld캼.' c칲mlesindeki happy hour kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["indirim saatleri", "kampanya saati", "indirim vakti", "promosyon saati"] }, { q: "'Oyuncu ayn캼 ma칞ta 칲칞 gol atarak hat trick yapt캼.' c칲mlesindeki hat trick kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칲칞leme", "칲칞 gol", "칲칞 say캼", "칲칞 ba르r캼"] }, { q: "'Hacker, sisteme izinsiz girerek bir칞ok bilgiyi ele ge칞irdi.' c칲mlesindeki hacker kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["bilgisayar korsan캼", "siber sald캼rgan", "를fre k캼r캼c캼", "korsan"] },  { q: "'Bu hipotez deneylerle desteklenirse yeni bir teoriye d칬n칲른bilir.' c칲mlesindeki hipotez kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["varsay캼m", "kuram", "sonu칞", "kan캼t"] }, { q: "'Denizde jet ski ile dola릀ak adrenalin dolu bir deneyimdir.' c칲mlesindeki jet ski kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["su k캼za캼", "kano", "deniz bisikleti", "s칲rat teknesi"] }, { q: "'Yar캼릀an캼n kazananlar캼n캼 j칲ri oy birli를yle belirledi.' c칲mlesindeki j칲ri kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["se칞ici kurul", "hakem heyeti", "de른rlendirme kurulu", "se칞ici heyet"] }, { q: "'Kalifiye eleman bulmak baz캼 sekt칬rlerde olduk칞a zorla릆캼.' c칲mlesindeki kalifiye kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["nitelikli", "ehil", "uzman", "yetkin"] }, { q: "'Depremden sonra 른hirde tam bir kaos ortam캼 olu릆u.' c칲mlesindeki kaos kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["karga르", "d칲zen", "istikrar", "plan"] }, { q: "'Montunun kap칲릂n k캼sm캼 ya릀urlu havalarda 칞ok i를ne yar캼yor.' c칲mlesindeki kap칲릂n kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ba륿캼k", "yaka", "man른t", "fermuar"] }, { q: "'Onun duru릇nda insanlar캼 etkileyen bir karizma var.' c칲mlesindeki karizma kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["etkileyicilik", "cazibe", "칞ekicilik", "etki g칲c칲"] }, { q: "'Bilim insanlar캼, klon hayvanlar 칲zerinde 칞e를tli deneyler yap캼yor.' c칲mlesindeki klon kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["kopya", "e kopya", "ikiz", "kopyalama"] }, { q: "'칂al캼르nlar캼n 칞ocuklar캼 i칞in kurum i칞inde bir kre a칞캼ld캼.' c칲mlesindeki kre kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["yuva", "anaokulu", "g칲nd칲z bak캼mevi", "oyun grubu"] }, { q: "'Bu i륿em legal oldu릇 i칞in herhangi bir sorun ya르mazs캼n캼z.' c칲mlesindeki legal kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["yasal", "meru", "hukuki", "yasaya uygun"] }, { q: "'Yeni 칲r칲n칲n lansman캼 b칲y칲k bir salon toplant캼s캼yla yap캼ld캼.' c칲mlesindeki lansman kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["tan캼t캼m", "reklam", "kampanya", "duyuru"] }, { q: "'Bu ilac캼n likit formu 칞ocuklar i칞in daha kullan캼륿캼.' c칲mlesindeki likit kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["s캼v캼", "toz", "tablet", "kat캼"] }, { q: "'칐dev dosyas캼n캼n linkini s캼n캼f grubunda payla릆캼m.' c칲mlesindeki link kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ba륿ant캼", "adres", "ba", "URL"] }, { q: "'Onun fikirleri 칞o릇 insana g칬re olduk칞a marjinal kal캼yor.' c칲mlesindeki marjinal kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ayk캼r캼", "ana ak캼m", "geleneksel", "s캼radan"] }, { q: "'G칬nderdi를n mesaj bana biraz ge칞 ula릆캼.' c칲mlesindeki mesaj kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ileti", "mektup", "haber", "duyuru"] }, { q: "'Hamuru kar캼릆캼rmak i칞in mikser kullanmay캼 tercih etti.' c칲mlesindeki mikser kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칞캼rp캼c캼", "f캼r캼n", "tencere", "b캼칞ak"] }, { q: "'Bu roman mistik 칬gelerle dolu bir d칲nyada ge칞iyor.' c칲mlesindeki mistik kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["gizemci", "s캼rl캼", "tasavvufi", "ruhani"] }, { q: "'Hayatta kendine se칞ti를 motto, her zaman d칲r칲st olmakt캼.' c칲mlesindeki motto kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬zdeyi", "parola", "ilke", "s칬z"] }, { q: "'Filmin montaj a르mas캼 beklenenden uzun s칲rd칲.' c칲mlesindeki montaj kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["kurgu", "senaryo", "칞ekim", "dublaj"] }, { q: "'Narsist ki를ler genellikle kendilerini ba륾alar캼ndan 칲st칲n g칬r칲r.' c칲mlesindeki narsist kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬zsever", "benmerkezci", "kendini be른nmi", "bencil"] },   { q: "'Bu tasar캼m tamamen orijinal, kimseye benzemiyor.' c칲mlesindeki orijinal kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬zg칲n", "kopya", "taklit", "sahte"] }, { q: "'룐hrin yeni plaza b칬lgesinde 칞ok say캼da ofis bulunuyor.' c칲mlesindeki plaza kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["i merkezi", "i han캼", "ticaret merkezi", "ofis binas캼"] }, { q: "'캻ki yazar aras캼nda gazetede sert bir polemik ba륿ad캼.' c칲mlesindeki polemik kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["s칬z dala캼", "tart캼릀a", "at캼릀a", "m칲naka르"] }, { q: "'Hayat캼nda baz캼 prensiplerden asla vazge칞miyor.' c칲mlesindeki prensip kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ilke", "칞캼kar", "kapris", "al캼륾anl캼k"] }, { q: "'Bo zamanlar캼nda puzzle yaparak dinlenmeyi seviyor.' c칲mlesindeki puzzle kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["yapboz", "lego", "칞izim", "oyun kart캼"] }, { q: "'D칲zenli bak캼m yap캼lmayan makinelerden yeterli rand캼man al캼namaz.' c칲mlesindeki rand캼man kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["verim", "gider", "masraf", "kay캼p"] }, { q: "'U칞a캼n kalk캼캼 yo릇n sis nedeniyle r칬tar yapt캼.' c칲mlesindeki r칬tar kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["gecikme", "h캼zlanma", "erken kalk캼", "vakitlice"] }, { q: "'S캼navdan 칬nceki geceyi sabote eden g칲r칲lt칲l칲 bir in르at vard캼.' c칲mlesindeki sabote kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["baltalama", "engellemek", "bozmak", "uykusuzluk"] }, { q: "'Yeni 칬retmen 칬rencilere kar캼 칞ok sempatik davran캼yor.' c칲mlesindeki sempatik kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["s캼cakkanl캼", "sevimli", "cana yak캼n", "ho륺칬r칲l칲"] }, { q: "'Ma칞캼n skor tabelas캼 s캼k s캼k bozuldu.' c칲mlesindeki skor kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sonu칞", "taktik", "hakem", "seyirci"] }, { q: "'Bu metin bana biraz fazla sofistike geldi.' c칲mlesindeki sofistike kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["yapmac캼k", "basit", "kaba", "s캼radan"] }, { q: "'Bu iddia tamamen spek칲latif yorumlara dayan캼yor.' c칲mlesindeki spek칲latif kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["kurgusal", "kesin", "kan캼tl캼", "nesnel"] }, { q: "'Arkada륿ar캼yla bulu릀a karar캼 tamamen spontane geli릆i.' c칲mlesindeki spontane kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["anl캼k", "planl캼", "칬nceden kararla릆캼r캼lm캼", "hesapl캼"] }, { q: "'룐f, bu ak르ma 칬zel bir spesiyal haz캼rlad캼캼n캼 s칬yledi.' c칲mlesindeki spesiyal kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬zel", "men칲", "tatl캼", "i칞ecek"] }, { q: "'Depoda biriken stok miktar캼 beklenenden fazla 칞캼kt캼.' c칲mlesindeki stok kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["y캼캼l캼m", "depo", "birikim", "mal fazlas캼"] }, { q: "'Defterinin kapa캼na renkli sticker yap캼릆캼rm캼.' c칲mlesindeki sticker kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칞캼kartma", "kalem", "z캼mba", "dosya"] }, { q: "'Hatalara kar캼 belli bir tolerans g칬sterilmelidir.' c칲mlesindeki tolerans kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ho륺칬r칲", "yasak", "ceza", "kat캼l캼k"] }, { q: "'Ya르d캼캼 trafik kazas캼 onda derin bir travma b캼rakt캼.' c칲mlesindeki travma kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["sars캼nt캼", "mutluluk", "al캼륾anl캼k", "s캼radanl캼k"] }, { q: "'Bu y캼l sade tasar캼mlar moda trend aras캼nda 칬ne 칞캼k캼yor.' c칲mlesindeki trend kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["e를lim", "moda", "ak캼m", "tarz"] }, { q: "'Kurulan 른hir tamamen 칲topik bir d칲zen 칲zerine kurgulanm캼.' c칲mlesindeki 칲topik kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["hayal칥", "ger칞ek칞i", "somut", "pratik"] }, { q: "'Bu makalenin analizi olduk칞a kapsaml캼 bir 칞al캼릀a gerektiriyor.' c칲mlesindeki analiz kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칞칬z칲mleme", "칬zet", "hik칙ye", "tahmin"] }, { q: "'Projeye ba륿amadan 칬nce bir konsept belirlememiz gerekiyor.' c칲mlesindeki konsept kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["kavram", "malzeme", "른kil", "renk"] },  { q: "'Bu tabloda t칲m mod칲l ayarlar캼n캼 g칬rebilirsiniz.' c칲mlesindeki mod칲l kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["par칞a", "sistem", "yap캼", "d칲zenek"] },  { q: "'Yeni medya kampanyas캼 olduk칞a etkili bir sloganla haz캼rland캼.' c칲mlesindeki slogan kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칞arp캼c캼 s칬z", "ba륿캼k", "tan캼t캼m metni", "bildiri"] }, { q: "'Her departman캼n kendi stratejisini olu릆urmas캼 bekleniyor.' c칲mlesindeki strateji kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["izlem", "르ns", "tesad칲f", "al캼륾anl캼k"] }, { q: "'Her departman캼n kendi stratejisini olu릆urmas캼 bekleniyor.' c칲mlesindeki departman kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["b칬l칲m", "apartman", "birim", "oda"] },  { q: "'칖r칲n tasar캼m캼 s캼ras캼nda prototip 칲zerinde bir칞ok de를를klik yap캼ld캼.' c칲mlesindeki prototip kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ilk 칬rnek", "taslak", "deneme 칲r칲n칲", "reklam 칲r칲n칲"] }, { q: "'Bu i i칞in uygun bir profil bulmak biraz zaman alacak.' c칲mlesindeki profil kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["ki를sel 칬zellik", "칬zellikler", "kimlik", "tan캼m"] }, { q: "'Bu sistemin optimum d칲zeyde 칞al캼릀as캼 i칞in ayar yap캼lmas캼 gerekiyor.' c칲mlesindeki optimum kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["en uygun", "minimum", "a캼r캼", "eksik"] }, { q: "'Y칬netim kurulu projeyi onaylamak i칞in bir vizyon sunulmas캼n캼 istedi.' c칲mlesindeki vizyon kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["g칬r칲n칲m", "gelecek hedefi", "bak캼", "uzun vadeli ama칞"] }, { q: "'Ekibin motivasyonunu art캼rmak i칞in yeni bir misyon belirlendi.' c칲mlesindeki misyon kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["g칬rev", "vizyon", "hedef", "plan"] },  { q: "'Etkinlik sonunda kat캼l캼mc캼lara sertifika verilecek.' c칲mlesindeki sertifika kelimesinin T칲rk칞e kar캼l캼캼 nedir?", a: ["칬renim belge", "diploma", "kat캼l캼m belgesi", "yeterlilik belgesi"] }
  ];

  // ==========================================
  // TCKN KONTROL VE TEKRAR G캻R캻 ENGEL캻 FONKS캻YONU
  // ==========================================
  window.checkTcknAndStart = async (userInfo) => {
    const tckn = userInfo.tckn;

    // 1. 11 Hane Kontrol칲
    if (tckn.length !== 11) {
        alert("HATA: T.C. Kimlik Numaras캼 tam olarak 11 rakamdan olu릀al캼d캼r.");
        return false;
    }
    
    // 2. Sadece Rakam Kontrol칲
    if (!/^\d{11}$/.test(tckn)) {
        alert("HATA: T.C. Kimlik Numaras캼 sadece rakamlardan olu릀al캼d캼r.");
        return false;
    }

    // 3. Tekrar Giri Engeli (Firebase Kontrol칲)
    const q = query(collection(db, "scores"), where("tckn", "==", tckn));
    const snapshot = await getDocs(q);

    if (!snapshot.empty) {
        alert("HATA: Bu T.C. Kimlik Numaras캼 ile daha 칬nce yar캼릀aya kat캼l캼m sa륿anm캼릆캼r.");
        return false;
    }

    return true; // T칲m kontroller ba르r캼l캼
}


  // ==========================================
  // 3. OYUN MOTORU
  // ==========================================
  let quizQuestions = [];
  let currentQIndex = 0;
  let score = 0;
  let timerInterval;
  let totalSeconds = 0;
  let userInfo = {};

  // Ekran Elementleri
  const els = {
      login: document.getElementById('login-screen'),
      quiz: document.getElementById('quiz-screen'),
      result: document.getElementById('result-screen'),
      counter: document.getElementById('question-counter'),
      qText: document.getElementById('question-text'),
      opts: document.getElementById('options-container'),
      timer: document.getElementById('timer'),
      score: document.getElementById('final-score'),
      time: document.getElementById('final-time')
  };

  // Ba륿ama Butonu G칖NCELLEND캻 (ASYNC YAPILDI)
  document.getElementById('user-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      userInfo = {
          name: document.getElementById('username').value,
          email: document.getElementById('useremail').value,
          phone: document.getElementById('userphone').value,
          tckn: document.getElementById('user-tckn').value // Yeni alan eklendi
      };
      
      const isTcknValid = await checkTcknAndStart(userInfo);
    
      if (isTcknValid) {
          startQuiz();
      }
  });

  function startQuiz() {
     
      els.login.classList.add('hidden');
      els.quiz.classList.remove('hidden');

      // 50 soruluk havuzu rastgele kar캼릆캼r ve ilk 20 tanesini se칞.
      // Bu, yar캼릀ada her seferinde farkl캼 bir 20 soru seti kullan캼lmas캼n캼 sa륿ar.
      quizQuestions = [...allQuestions]
          .sort(() => 0.5 - Math.random()) // T칲m havuzu kar캼릆캼r
          .slice(0, 20); // 캻lk 20 soruyu se칞
      
      // Zamanlay캼c캼y캼 ba륿at
      timerInterval = setInterval(() => {
          totalSeconds++;
          const m = Math.floor(totalSeconds / 60).toString().padStart(2, '0');
          const s = (totalSeconds % 60).toString().padStart(2, '0');
          els.timer.innerText = `${m}:${s}`;
      }, 1000);

      loadQuestion();
  }

  function loadQuestion() {
      if (currentQIndex >= quizQuestions.length) {
          endQuiz();
          return;
      }

      const q = quizQuestions[currentQIndex];
      els.counter.innerText = `Soru ${currentQIndex + 1} / ${quizQuestions.length}`;
      els.qText.innerText = q.q;
      els.opts.innerHTML = '';

      // 뤣쎪lar캼 kar캼릆캼r (Doru cevab캼 takip et)
      let options = q.a.map((txt, i) => ({ text: txt, isCorrect: i === 0 }));
      options.sort(() => 0.5 - Math.random());

      options.forEach(opt => {
          const btn = document.createElement('button');
          btn.className = 'btn option-btn';
          btn.innerHTML = `<span>${opt.text}</span>`;
          btn.onclick = () => handleAnswer(opt.isCorrect);
          els.opts.appendChild(btn);
      });
  }

  function handleAnswer(isCorrect) {
      if (isCorrect) score += 5; // Her doru 5 puan (20 soru * 5 = 100)
      currentQIndex++;
      loadQuestion();
  }

  async function endQuiz() {
      clearInterval(timerInterval);
      els.quiz.classList.add('hidden');
      els.result.classList.remove('hidden');

      els.score.innerText = score;
      const m = Math.floor(totalSeconds / 60);
      const s = totalSeconds % 60;
      els.time.innerText = `${m}dk ${s}sn`;

      // Firebase Kayd캼 G칖NCELLEND캻 (TCKN EKLEND캻)
      try {
          await addDoc(collection(db, "scores"), {
              name: userInfo.name,
              email: userInfo.email,
              phone: userInfo.phone,
              tckn: userInfo.tckn, // YEN캻: TCKN kaydediliyor
              score: score,
              time: totalSeconds,
              date: new Date().toISOString()
          });
          getLeaderboard();
      } catch (err) {
          console.error("Kay캼t hatas캼:", err);
          alert("Puan kaydedilemedi, internet ba륿ant캼n캼z캼 kontrol edin.");
      }
  }

  async function getLeaderboard() {
      const q = query(collection(db, "scores"), orderBy("score", "desc"), orderBy("time", "asc"), limit(10));
      const snapshot = await getDocs(q);
      const tbody = document.getElementById('leaderboard-body');
      tbody.innerHTML = '';
      
      let rank = 1;
      snapshot.forEach(doc => {
          const d = doc.data();
          tbody.innerHTML += `<tr><td>${rank++}</td><td>${d.name}</td><td><strong>${d.score}</strong></td><td>${d.time}sn</td></tr>`;
      });
  }

  // --- GLOBAL ADMIN FONKS캻YONLARI ---
  window.toggleAdmin = () => document.getElementById('admin-panel').classList.toggle('hidden');
  
  window.checkAdmin = async () => {
      if(document.getElementById('admin-pass').value === "admin123") {
          document.getElementById('admin-data').classList.remove('hidden');
          const snapshot = await getDocs(query(collection(db, "scores"), orderBy("score", "desc")));
          const tbody = document.querySelector('#full-table tbody');
          tbody.innerHTML = '';
          // ADMIN TABLO 캻칂ER캻뤣 G칖NCELLEND캻 (TCKN EKLEND캻)
          snapshot.forEach(doc => {
              const d = doc.data();
              tbody.innerHTML += `<tr><td>${new Date(d.date).toLocaleDateString()}</td><td>${d.name}</td><td>${d.email}</td><td>${d.phone}</td><td>${d.tckn || 'N/A'}</td><td>${d.score}</td><td>${d.time}</td></tr>`;
          });
      } else { alert("Hatal캼 룔fre!"); }
  }

  window.exportTableToCSV = (filename) => {
    const rows = document.querySelectorAll("#full-table tr");
    let csv = [];
    for (const row of rows) {
        const cols = row.querySelectorAll("td, th");
        csv.push(Array.from(cols).map(c => c.innerText).join(","));
    }
    const blob = new Blob([csv.join("\n")], {type: "text/csv"});
    const link = document.createElement("a");
    link.href = window.URL.createObjectURL(blob);
    link.download = filename;
    link.click();
  }
</script>

</body>

</html>





